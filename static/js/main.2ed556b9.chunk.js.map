{"version":3,"sources":["components/NavBar/Navbar.module.css","utils/object-helers.ts","serviceWorker.js","redux/sidebar-reducer.ts","redux/app-reducer.ts","redux/redux-store.ts","components/NavBar/Navbar.jsx","components/Header/Header.tsx","components/Header/HeaderContainer.tsx","hoc/Suspense.tsx","App.tsx","index.tsx","api/AuthAPI.ts","redux/auth-reducer.ts","components/Header/Header.module.css","api/api.ts","common/Preloader.tsx","api/ProfileAPI.ts","redux/profile-reducer.ts","redux/dialogs-reducer.ts","api/UsersAPI.ts","redux/usersReducer.ts","pictures/loader.gif","common/Preloader.module.css","pictures/logo.png"],"names":["module","exports","updateObjectInArray","items","itemId","objPropName","newObjProps","map","u","Boolean","window","location","hostname","match","initialState","sidebarReducer","state","initialized","Actions","type","appReducer","action","reducers","combineReducers","auth","authReducer","dialogsPage","dialogsReducer","profilePage","profileReducer","sidebarPage","usersPage","usersReducer","form","formReducer","app","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","__store__","Navbar","props","className","classes","nav","item","to","activeClassName","activeLink","Header","header","logo","src","loginBlock","isAuth","login","onClick","logout","HeaderContainer","this","Component","connect","createSuspense","WrappedComponent","fallback","Login","React","lazy","ProfileContainer","UsersContainer","DialogsContainer","ProfileConteincerWithSuspens","LoginWithSuspens","UsersContainerWithSuspens","DialogsContainerWithSuspens","App","initializeApp","path","exact","render","Preloader","AppConteiner","withRouter","dispatch","a","promise","getAuthUserData","Promise","all","then","MainApp","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message","authAPI","instance","get","res","data","email","password","rememberMe","captcha","post","delete","userid","captchaUrl","actions","payload","resultCode","id","LogResultCodeenum","Success","messages","length","stopSubmit","_error","captchaDisplayed","ResultCodeEnum","url","axios","create","withCredentials","baseURL","headers","style","backgroundColor","loader","preloader","profileAPI","userId","profile","put","status","photoFile","formData","FormData","append","posts","likesCount","addPostActionCreator","newPostText","setUserProfile","setStatus","deletePost","postId","setPhotoSuccess","photos","getUserProfile","getStatus","updateStatus","setPhoto","photo","saveProfile","getState","reject","newPost","filter","dialogs","name","isSituation","sendMessageCreator","newMessageBody","body","usersAPI","getUsers","currentPage","pageSize","term","followed","getFriendsOfAllUsers","friend","follow","unfollow","require","users","totalUsersCount","isFetching","followingProgress","requestUsers","page","UsersData","totalCount","_followUngollowFlow","apiMethod","actionCreator","bind"],"mappings":"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","file":"static/js/main.2ed556b9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__3JO-u\",\"item\":\"Navbar_item__3M8CF\",\"activeLink\":\"Navbar_activeLink__2LwWY\"};","export const updateObjectInArray = (items: any, itemId: any, objPropName: any, newObjProps: any) => {\r\n    return items.map((u: any) => {\r\n        if (u[objPropName] === itemId) {\r\n            return {...u, ...newObjProps}\r\n        }\r\n        return u;\r\n    }\r\n    )}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","let initialState = {};\r\n\r\nconst sidebarReducer = (state = initialState, action: any) => {\r\n    return state;\r\n}\r\n\r\nexport default sidebarReducer;","import { InferActionsTypies, BaseThunkType } from './redux-store';\r\nimport { getAuthUserData } from \"./auth-reducer\";\r\n\r\ntype initialStateType = {\r\n    initialized: boolean\r\n}\r\n\r\nlet initialState = {\r\n    initialized: false\r\n};\r\nexport type ThunkType = BaseThunkType<ActionsType>\r\n\r\nconst appReducer = (state = initialState, action: ActionsType): initialStateType => {\r\n    switch (action.type) {\r\n        case \"INITIALIZED_SUCCESS\":\r\n            return {\r\n                ...state,\r\n                initialized: true,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\nexport type ActionsType = InferActionsTypies<typeof Actions>\r\nexport const Actions = {\r\n    initializedSuccess: () => ({ type: \"INITIALIZED_SUCCESS\" } as const)\r\n}\r\nexport const initializeApp = (): ThunkType =>  async (dispatch) => {\r\n    let promise = dispatch(getAuthUserData());\r\n    Promise.all([promise])\r\n        .then(() => {\r\n            dispatch(Actions.initializedSuccess())\r\n        })\r\n}\r\n\r\nexport default appReducer;","import authReducer from \"./auth-reducer\";\r\nimport dialogsReducer from \"./dialogs-reducer\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport sidebarReducer from \"./sidebar-reducer\";\r\nimport usersReducer from \"./usersReducer\";\r\nimport { reducer as formReducer} from 'redux-form'\r\nimport appReducer from \"./app-reducer\";\r\nimport { applyMiddleware, compose, createStore, combineReducers, Action } from \"redux\";\r\nimport thunkMiddleware, { ThunkAction } from 'redux-thunk'\r\n\r\n\r\n\r\nlet reducers = combineReducers({\r\n    auth: authReducer,\r\n    dialogsPage: dialogsReducer,\r\n    profilePage: profileReducer,\r\n    sidebarPage: sidebarReducer,\r\n    usersPage: usersReducer,\r\n    form: formReducer,\r\n    app: appReducer\r\n\r\n})\r\n\r\ntype PropertiesType<T> = T extends{[key:string]: infer U} ? U : never\r\n\r\nexport type InferActionsTypies<T extends{[key: string]: (...args: any[]) => any}> = ReturnType<PropertiesType<T>>\r\n\r\n\r\ntype ReducersType = typeof reducers\r\nexport type AppReducersType = ReturnType<ReducersType>\r\n\r\nexport type BaseThunkType<A extends Action, R = Promise<void>> = ThunkAction<R, AppReducersType, unknown, A>\r\n//@ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n//@ts-ignore\r\nwindow.__store__ = store;\r\n\r\nexport default store;","import React from 'react'\r\nimport classes from './Navbar.module.css'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\n\r\nconst Navbar = (props) => {\r\n    return (\r\n        <nav className={classes.nav}>\r\n            <div className = {classes.item}>\r\n                <NavLink to = '/profile' activeClassName = {classes.activeLink}>Profile</NavLink>\r\n            </div>\r\n            <div className = {classes.item}>\r\n                <NavLink to = '/dialogs' activeClassName = {classes.activeLink}>Dialogs</NavLink>\r\n            </div>\r\n            <div className = {classes.item}>\r\n                <NavLink to = '/users' activeClassName = {classes.activeLink}>Users</NavLink>\r\n            </div>\r\n            <div className = {classes.item}>\r\n                <NavLink to = '/news' activeClassName = {classes.activeLink}>News</NavLink>\r\n            </div>\r\n            <div className = {classes.item}>\r\n                <NavLink to = '/music' activeClassName = {classes.activeLink}>Music</NavLink>\r\n            </div>\r\n            <div className = {classes.item}>\r\n                <NavLink to = '/setings' activeClassName = {classes.activeLink}>Setings</NavLink>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navbar","import React from 'react'\r\nimport logo from '../../pictures/logo.png'\r\nimport classes from './Header.module.css'\r\nimport { NavLink } from 'react-router-dom'\r\nimport {PropsType} from './HeaderContainer'\r\nconst Header: React.FC<PropsType> = (props) => {\r\n    \r\n    return <header className = {classes.header}>\r\n        <img className = {classes.logo} src = {logo}/>\r\n        <div className={classes.loginBlock}>\r\n        {props.isAuth\r\n            ? <div>{props.login} -<button onClick={props.logout}>Log out</button></div>\r\n            : <NavLink to={'/login'}>Login</NavLink>\r\n        }\r\n        </div>\r\n    </header>\r\n}\r\n\r\nexport default Header;","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport {logout} from '../../redux/auth-reducer';\r\nimport Header from './Header';\r\nimport { AppReducersType } from '../../redux/redux-store';\r\n\r\nexport type PropsType = {\r\n    isAuth: boolean\r\n    login: string | null\r\n    logout: () => void\r\n}\r\n\r\nclass HeaderContainer extends Component<PropsType>{\r\n    render () {\r\n        return <Header \r\n        isAuth = {this.props.isAuth}\r\n        login = {this.props.login}\r\n        logout = {this.props.logout}/>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppReducersType) => ({\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login\r\n});\r\ntype mstp = {\r\n    isAuth: boolean\r\n    login: string | null\r\n}\r\ntype mdtp = {\r\n    logout: () => void\r\n}\r\nexport default connect<mstp, mdtp, unknown, AppReducersType>(mapStateToProps, {logout}) (HeaderContainer)","import React, { Suspense, ComponentType } from 'react'\r\n\r\nfunction createSuspense<WP>(WrappedComponent: ComponentType<WP>) {\r\n    return  (props: WP) => {\r\n    return <Suspense fallback={<div>Loading...</div>}>\r\n        <WrappedComponent {...props} />\r\n    </Suspense>\r\n    }\r\n}\r\n\r\nexport default createSuspense","import React, { Component, Suspense } from 'react';\nimport './App.css';\nimport { Route, withRouter, BrowserRouter, Switch, Redirect } from \"react-router-dom\";\nimport { connect, Provider } from \"react-redux\";\nimport { compose } from \"redux\";\nimport store, { AppReducersType } from \"./redux/redux-store\";\nimport Preloader from './common/Preloader';\nimport Navbar from './components/NavBar/Navbar';\nimport HeaderContainer from './components/Header/HeaderContainer';\nimport createSuspense from './hoc/Suspense';\nimport { initializeApp, ThunkType } from './redux/app-reducer'\nconst Login = React.lazy(() => import('./components/Login/Login'));\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'));\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\n\ntype PropsType = mstp & mdtp\n\nconst ProfileConteincerWithSuspens = createSuspense(ProfileContainer)\nconst LoginWithSuspens = createSuspense(Login)\nconst UsersContainerWithSuspens = createSuspense(UsersContainer)\nconst DialogsContainerWithSuspens = createSuspense(DialogsContainer)\n\n\nclass App extends Component<PropsType> {\n  componentDidMount() {\n    this.props.initializeApp()\n  }\n  render() {\n    if (!this.props.initialized) {\n      return <Preloader />\n    }\n    return (\n      <div className='app-wrapper'>\n        <HeaderContainer />\n        <Navbar />\n        <div className='app-wrapper-content'>\n          <Switch >\n            <Route path='/' exact> <Redirect to=\"/profile\" /> </Route>\n            <Route path='/profile/:userId?'\n              render={() => <ProfileConteincerWithSuspens/> }/>\n            <Route path='/login'\n              render={() => <LoginWithSuspens />} />\n            <Route path='/users'\n              render={() => <UsersContainerWithSuspens />} />\n            <Route path='/dialogs'\n              render={() => <DialogsContainerWithSuspens />} />\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\ntype mstp = {\n  initialized: boolean\n}\ntype mdtp = {\n  initializeApp: () => void\n}\nconst mapStateToProps = (state: AppReducersType) => ({\n  initialized: state.app.initialized\n})\nlet AppConteiner = compose<React.ComponentType>(\n  withRouter,\n  connect<mstp, mdtp, unknown, AppReducersType>(mapStateToProps, { initializeApp })\n)(App)\n\nconst MainApp = (props: any) => {\n  return (\n    <BrowserRouter>\n      <Provider store={store}>\n        <AppConteiner />\n      </Provider>\n    </BrowserRouter>\n  )\n\n}\n\nexport default MainApp;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport MainApp from './App';\n\nReactDOM.render(<MainApp />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { instance, ResultCodeEnum, ResponseType, LogResultCodeenum } from './api'\r\n\r\n\r\ntype GetAuthDataType = {\r\n    id: number,\r\n    email: string,\r\n    login: string\r\n}\r\ntype LoginResponseData = {\r\n    userId: number\r\n}\r\ntype GetCaptcha = {\r\n    url: string\r\n}\r\n\r\n\r\n\r\nexport const authAPI = {\r\n    me() {\r\n        return instance.get<ResponseType<GetAuthDataType, ResultCodeEnum>>(`auth/me`).then(res => res.data);\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean, captcha: null | string) {\r\n        return instance.post<ResponseType<LoginResponseData, LogResultCodeenum>>(`auth/login`, { email, password, rememberMe, captcha }).then(res => res.data);\r\n    },\r\n    logout() {\r\n        return instance.delete<ResponseType>(`auth/login`).then(res => res.data);\r\n    },\r\n    getCaptcha() {\r\n        return instance.get<GetCaptcha>(`security/get-captcha-url`).then(res => res.data);\r\n    }\r\n}","import { LogResultCodeenum, ResultCodeEnum } from './../api/api';\r\nimport { AppReducersType, InferActionsTypies, BaseThunkType } from './redux-store';\r\nimport { Dispatch } from 'react';\r\nimport { authAPI } from \"../api/AuthAPI\";\r\nimport { stopSubmit, FormAction } from \"redux-form\";\r\n\r\nlet initialState = {\r\n    userid: 1 as number,\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false as boolean,\r\n    captchaUrl: null as string | null\r\n}\r\ntype initialStateType = typeof initialState\r\n\r\nconst authReducer = (state = initialState, action: ActionsType): initialStateType => {\r\n    switch (action.type) {\r\n        case \"SET_USER_DATA\":\r\n        case \"SET_CAPTCHA\":\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst actions = {\r\n    setAuthUserData: (userid: number | null, email: string | null, login: string | null, isAuth: boolean) => ({\r\n        type: \"SET_USER_DATA\",\r\n        payload: { userid, email, login, isAuth }\r\n    }),\r\n    setCaptcha: (captchaUrl: string | null) => ({\r\n        type: \"SET_CAPTCHA\",\r\n        payload: { captchaUrl }\r\n    })\r\n}\r\n\r\ntype ThunkType = BaseThunkType<ActionsType>\r\ntype ActionsType = InferActionsTypies<typeof actions> | FormAction\r\nexport const getAuthUserData = (): ThunkType => async (dispatch) => {\r\n    let data = await authAPI.me();\r\n    if (data.resultCode === 0) {\r\n        let { id, login, email } = data.data;\r\n        dispatch(actions.setAuthUserData(id, email, login, true))\r\n    }\r\n}\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string | null): ThunkType => async (dispatch) => {\r\n    let data = await authAPI.login(email, password, rememberMe, captcha);\r\n    if (data.resultCode === LogResultCodeenum.Success) {\r\n        dispatch(getAuthUserData())\r\n    }\r\n    else {\r\n        let message = data.messages.length > 0 ? data.messages[0] : 'Some error';\r\n        dispatch(stopSubmit('login', { _error: message }))\r\n        if (data.resultCode === LogResultCodeenum.captcha) {\r\n            dispatch(captchaDisplayed())\r\n        }\r\n    }\r\n}\r\nexport const logout = (): ThunkType => async (dispatch) => {\r\n    let data = await authAPI.logout();\r\n    if (data.resultCode === ResultCodeEnum.Success) {\r\n        dispatch(actions.setAuthUserData(null, null, null, false))\r\n    }\r\n}\r\nexport const captchaDisplayed = (): ThunkType => async (dispatch) => {\r\n    const data = await authAPI.getCaptcha();\r\n    const captcha = data.url\r\n    dispatch(actions.setCaptcha(captcha))\r\n}\r\n\r\nexport default authReducer","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3-e1q\",\"logo\":\"Header_logo__3RQHb\",\"loginBlock\":\"Header_loginBlock__1JHeJ\"};","import axios from 'axios'\r\n\r\nexport const instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: { 'API-KEY': '19935fd5-6e17-47c2-8544-ba33f3051235' }\r\n})\r\nexport type ResponseType<D = {}, RC = ResultCodeEnum> = {\r\n    data: D\r\n    resultCode: RC\r\n    messages: Array<string>\r\n}\r\nexport enum ResultCodeEnum {\r\n    Success = 0,\r\n    Error = 1\r\n}\r\nexport enum LogResultCodeenum {\r\n    captcha = 10,\r\n    Success = 0,\r\n    Error = 1\r\n}\r\n","import React from 'react';\r\nimport preloader from '../pictures/loader.gif';\r\nimport classes from './Preloader.module.css';\r\n\r\nlet Preloader = () => { \r\n    return <div style = { {backgroundColor: 'white'}} >\r\n        <img className = {classes.loader} src = {preloader} />\r\n    </div>\r\n}\r\n\r\nexport default Preloader","import {instance, ResponseType} from './api'\r\nimport { photoType, ProfileType} from '../types/types'\r\n\r\n\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: number) {\r\n        return instance.get<ProfileType>(`profile/` + userId).then(res => res.data)\r\n    },\r\n    saveProfile(profile: ProfileType) {\r\n        return instance.put<ResponseType>(`profile`, profile).then(res => res.data)\r\n    },\r\n    getStatus(userId: number) {\r\n        return instance.get<string>(`profile/status/` + userId ).then(res => res.data)\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put<ResponseType>(`profile/status`, { status: status }).then(res => res.data)\r\n    },\r\n    setPhoto(photoFile: Blob ) {\r\n        const formData = new FormData();\r\n        formData.append(\"image\", photoFile);\r\n        return instance.put<ResponseType<{photos: photoType}>>(`profile/photo`, formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        }).then(res => res.data)\r\n    }\r\n}","import { InferActionsTypies, BaseThunkType } from './redux-store';\r\nimport { ProfileType, SaveProfileType, photoType } from './../types/types';\r\nimport { ResultCodeEnum } from \"../api/api\"\r\nimport { stopSubmit } from \"redux-form\"\r\nimport { Dispatch } from 'react';\r\nimport { profileAPI } from '../api/ProfileAPI';\r\n\r\n\r\ntype postType = {\r\n    id: number, message: string, likesCount: number,\r\n}\r\nlet initialState = {\r\n    posts: [\r\n        { id: 1, message: 'first', likesCount: 12 },\r\n        { id: 2, message: 'TRATATTA', likesCount: 11 },\r\n        { id: 3, message: 'Pleti your live', likesCount: 11 },\r\n        { id: 4, message: 'ccC', likesCount: 11 }\r\n    ] as Array<postType>,\r\n    profile: null as ProfileType | null,\r\n    status: '' as string,\r\n}\r\nexport type initialStateType = typeof initialState\r\nconst profileReducer = (state = initialState, action: ActionsType): initialStateType => {\r\n    switch (action.type) {\r\n        case \"ADD_POST\": {\r\n            let newPost: postType = {\r\n                id: 5,\r\n                message: action.newPostText,\r\n                likesCount: 1\r\n            }\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n            }\r\n        }\r\n        case \"SET_STATUS\": {\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case \"SET_USER_PROFILE\": {\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n        case \"DELETE_POST\": {\r\n            return {\r\n                ...state, posts: state.posts.filter(post => post.id != action.postId)\r\n            }\r\n        }\r\n        case \"SET_PHOTO\": {\r\n            return { ...state, profile: { ...state.profile, photos: action.photos } as ProfileType }\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport type ActionsType = InferActionsTypies<typeof actions>\r\n\r\nexport const actions = {\r\n    addPostActionCreator: (newPostText: string) => ({ type: \"ADD_POST\", newPostText } as const),\r\n    setUserProfile: (profile: ProfileType) => ({ type: \"SET_USER_PROFILE\", profile } as const),\r\n    setStatus: (status: string) => ({ type: \"SET_STATUS\", status } as const),\r\n    deletePost: (postId: number) => ({ type: \"DELETE_POST\", postId } as const),\r\n    setPhotoSuccess: (photos: photoType) => ({ type: \"SET_PHOTO\", photos } as const)\r\n}\r\n\r\ntype ThunkType = BaseThunkType<ActionsType | ReturnType<typeof stopSubmit>>\r\n\r\nexport const getInformationProfile = (userID: number, authorizedUserId: number, history: any): ThunkType => async (dispatch) => {\r\n    let userId = userID\r\n    if (!userId) {\r\n        userId = authorizedUserId;\r\n        if (!userID) {\r\n            history.push(\"/login\");\r\n        }\r\n    }\r\n    dispatch(getUserProfile(userId));\r\n    dispatch(getStatus(userId));\r\n}\r\nexport const getUserProfile = (userId: number): ThunkType => async (dispatch) => {\r\n    let data = await profileAPI.getProfile(userId);\r\n    debugger\r\n    dispatch(actions.setUserProfile(data))\r\n}\r\nexport const getStatus = (userId: number): ThunkType => async (dispatch) => {\r\n    debugger\r\n    let data = await profileAPI.getStatus(userId);\r\n    debugger\r\n    dispatch(actions.setStatus(data))\r\n}\r\nexport const updateStatus = (status: string): ThunkType => async (dispatch) => {\r\n    let data = await profileAPI.updateStatus(status);\r\n    if (data.resultCode === ResultCodeEnum.Success) {\r\n        dispatch(actions.setStatus(status))\r\n    }\r\n}\r\nexport const setPhoto = (photo: Blob): ThunkType => async (dispatch) => {\r\n    let data = await profileAPI.setPhoto(photo);\r\n    if (data.resultCode === ResultCodeEnum.Success) {\r\n        dispatch(actions.setPhotoSuccess(data.data.photos))\r\n    }\r\n}\r\nexport const saveProfile = (profile: ProfileType): ThunkType => async (dispatch, getState) => {\r\n    const userId = getState().auth.userid\r\n    let data = await profileAPI.saveProfile(profile);\r\n    if (data.resultCode === ResultCodeEnum.Success) {\r\n        dispatch(getUserProfile(userId))\r\n    }\r\n    else {\r\n        dispatch(stopSubmit('ProfileData', { _error: data.messages[0] }))\r\n        return Promise.reject(data.messages[0])\r\n    }\r\n}\r\n\r\n\r\nexport default profileReducer","const SEND_MESSAGE = 'SEND_MESSAGE';\r\n\r\nexport type dialogsType  = {\r\n    id: number\r\n    name: String\r\n}\r\nexport type messageType  = {\r\n    id: number\r\n    message: string\r\n    isSituation: boolean\r\n}\r\n\r\n\r\nlet initialState = {\r\n    dialogs: [\r\n        {id: 1, name: 'Pantiley'},\r\n        {id: 2, name: 'Skrepka'},\r\n        {id: 3, name: 'Felix'},\r\n        {id: 4, name: 'Toro'},\r\n        {id: 5, name: 'Viking'},\r\n        {id: 6, name: 'Axiles'}\r\n    ]as Array<dialogsType>,\r\n    messages: [\r\n        {id: 1, message: 'Hi', isSituation: true},\r\n        {id: 2, message: 'How is your nothing?0', isSituation: false},\r\n        {id: 3, message: 'AWESOME', isSituation: true},\r\n        {id: 4, message: 'WO WO', isSituation: false},\r\n        {id: 5, message: 'What did you think?', isSituation: true}\r\n    ]as Array<messageType>\r\n};\r\n\r\nexport type initialStateType = typeof initialState\r\ntype ActionsType = sendMessageCreatorType\r\nconst dialogsReducer = (state = initialState, action: ActionsType): initialStateType => {\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            let body = action.newMessageBody;\r\n            return {\r\n                ...state,\r\n                messages:\r\n                [...state.messages, {id: 6, message: body, isSituation: false}]\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\ntype sendMessageCreatorType = {type: typeof SEND_MESSAGE, newMessageBody: string}\r\nexport const sendMessageCreator = (newMessageBody: string): sendMessageCreatorType => ({type: SEND_MESSAGE, newMessageBody})\r\n\r\n\r\nexport default dialogsReducer;","import { userType } from \"../types/types\"\r\nimport {instance, ResponseType} from './api'\r\n\r\ntype UsersGetType = {\r\n    items: Array<userType>\r\n    totalCount: number\r\n    error: string | null\r\n}\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage = 1, pageSize = 10, term = \"\", followed: boolean | null = null) {\r\n    return instance.get<UsersGetType>(`users?page=${currentPage}&count=${pageSize}&term=${term}`+ (followed === null ? '' : `&friend=${followed}`)).then(res => res.data)\r\n    },  \r\n    getFriendsOfAllUsers(friend: true) {\r\n        return instance.get<UsersGetType>(`users?friend=${friend}`).then(res => res.data)\r\n    },\r\n    follow(userId: number) {\r\n        return instance.post<ResponseType>(`follow/${userId}`).then(res => res.data)\r\n    },\r\n    unfollow(userId: number) {\r\n        return instance.delete<ResponseType>(`follow/${userId}`).then(res => res.data)\r\n    }\r\n}","import { ResponseType } from './../api/api';\r\nimport { AppReducersType, InferActionsTypies } from './redux-store';\r\n\r\nimport { usersAPI } from \"../api/UsersAPI\"\r\nimport { userType } from \"../types/types\"\r\nimport { ThunkAction } from \"redux-thunk\"\r\nimport { Dispatch } from 'react';\r\nimport { ResultCodeEnum } from '../api/api';\r\n\r\nconst { updateObjectInArray } = require(\"../utils/object-helers\")\r\n\r\n\r\nlet initialState: initialStateType = {\r\n    users: [],\r\n    pageSize: 10,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingProgress: [],\r\n    filter: {\r\n        friend: null,\r\n        term: ''\r\n    }\r\n}\r\nexport type initialStateType = {\r\n    users: Array<userType>,\r\n    pageSize: number,\r\n    totalUsersCount: number,\r\n    currentPage: number,\r\n    isFetching: boolean,\r\n    followingProgress: Array<number>,\r\n    filter: FilterType\r\n}\r\nexport type FilterType = {\r\n    friend: boolean | null\r\n    term: string\r\n}\r\n\r\nconst usersReducer = (state = initialState, action: ActionsTypes): initialStateType => {\r\n    switch (action.type) {\r\n        case \"FOLLOW\":\r\n            return { ...state, users: updateObjectInArray(state.users, action.userId, 'id', { followed: true }) }\r\n        case \"UNFOLLOW\":\r\n            return { ...state, users: updateObjectInArray(state.users, action.userId, 'id', { followed: false }) }\r\n        case \"SET_USERS\":\r\n            return { ...state, users: action.users }\r\n        case \"SET_CURRENT_PAGE\":\r\n            return { ...state, currentPage: action.currentPage }\r\n        case \"SET_FILTER\":\r\n            return { ...state, filter: action.payload}\r\n        case \"SET_TOTAL_USERS_COUNT\":\r\n            return { ...state, totalUsersCount: action.totalUsersCount }\r\n        case \"TOGGLE_IS_FETCHING\":\r\n            return { ...state, isFetching: action.isFetching }\r\n        case \"TOGGLE_IS_FOLLO0WING_PROGRESS\":\r\n            return {\r\n                ...state, followingProgress: action.isFetching\r\n                    ? [...state.followingProgress, action.userId]\r\n                    : state.followingProgress.filter(id => id != action.userId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\ntype ActionsTypes = InferActionsTypies<typeof actions>\r\n\r\nexport let actions = {\r\n    followSuccess: (userId: number) => ({ type: 'FOLLOW', userId } as const),\r\n    unfollowSuccess: (userId: number) => ({ type: 'UNFOLLOW', userId } as const),\r\n    setUsers: (users: Array<userType>) => ({ type: 'SET_USERS', users } as const),\r\n    setFilter: (filter: FilterType) => ({ type: 'SET_FILTER', payload: filter } as const),\r\n    setCurrentPage: (currentPage: number) => ({ type: 'SET_CURRENT_PAGE', currentPage } as const),\r\n    setTotalUsersCount: (totalUsersCount: number) => ({ type: 'SET_TOTAL_USERS_COUNT', totalUsersCount } as const),\r\n    toggleIsFetching: (isFetching: boolean) => ({ type: 'TOGGLE_IS_FETCHING', isFetching } as const),\r\n    toggleIsFillowingProgress: (isFetching: boolean, userId: number) => ({ type: 'TOGGLE_IS_FOLLO0WING_PROGRESS', isFetching, userId } as const)\r\n}\r\ntype ThunkType = ThunkAction<Promise<void>, AppReducersType, unknown, ActionsTypes>\r\n\r\ntype DispatchType = Dispatch<ActionsTypes>\r\n\r\nexport const requestUsers = (page: number, pageSize: number, filter: FilterType): ThunkType => async (dispatch) => {\r\n    dispatch(actions.toggleIsFetching(true))\r\n    dispatch(actions.setCurrentPage(page))\r\n    dispatch(actions.setFilter(filter))\r\n\r\n    let UsersData = await usersAPI.getUsers(page, pageSize, filter.term, filter.friend);\r\n\r\n    dispatch(actions.toggleIsFetching(false))\r\n    dispatch(actions.setUsers(UsersData.items))\r\n    dispatch(actions.setTotalUsersCount(UsersData.totalCount))\r\n}\r\nconst _followUngollowFlow = async (dispatch: DispatchType, userId: number, apiMethod: (userId: number) => Promise<ResponseType>, actionCreator: (userId: number) => ActionsTypes) => {\r\n    dispatch(actions.toggleIsFillowingProgress(true, userId));\r\n    let data = await apiMethod(userId);\r\n\r\n    if (data.resultCode === ResultCodeEnum.Success) {\r\n        dispatch(actionCreator(userId))\r\n    }\r\n    dispatch(actions.toggleIsFillowingProgress(false, userId))\r\n}\r\n\r\nexport const follow = (userId: number): ThunkType => async (dispatch) => {\r\n    await _followUngollowFlow(dispatch, userId, usersAPI.follow.bind(usersAPI), actions.followSuccess)\r\n}\r\nexport const unfollow = (userId: number): ThunkType => async (dispatch) => {\r\n    await _followUngollowFlow(dispatch, userId, usersAPI.unfollow.bind(usersAPI), actions.unfollowSuccess)\r\n}\r\nexport default usersReducer","module.exports = __webpack_public_path__ + \"static/media/loader.8b9984fd.gif\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Preloader_loader__3Ji00\"};","module.exports = __webpack_public_path__ + \"static/media/logo.9e539386.png\";"],"sourceRoot":""}